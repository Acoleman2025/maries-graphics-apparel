<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shop - Marie's Graphics and Apparel</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #fff0f5;
      margin: 0;
      padding: 20px;
    }
    header, footer {
      background-color: #ff69b4;
      color: white;
      text-align: center;
      padding: 1rem;
    }
    nav {
      background-color: #ffc0cb;
      text-align: center;
      padding: 1rem;
    }
    nav a {
      margin: 0 1rem;
      color: #333;
      text-decoration: none;
      font-weight: bold;
    }
    .products {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      padding: 2rem 0;
    }
    .product {
      background: white;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      width: 250px;
    }
    .product img {
      width: 100%;
      border-radius: 8px;
    }
    button {
      background-color: #ff69b4;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background-color: #ff4c94;
    }
    #cart {
      position: fixed;
      top: 10%;
      right: 10px;
      width: 300px;
      max-height: 80vh;
      overflow-y: auto;
      background: white;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      border-radius: 12px;
      padding: 1rem;
      display: none;
      z-index: 1000;
    }
    #cart h2 {
      margin-top: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #cart h2 button {
      background: transparent;
      border: none;
      font-size: 1.4rem;
      cursor: pointer;
      color: #ff69b4;
    }
    #cart ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #cart ul li {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      align-items: center;
      gap: 5px;
    }
    #cart-footer {
      font-weight: bold;
      margin-top: 1rem;
      text-align: right;
    }
    #cart-toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #ff69b4;
      color: white;
      border: none;
      padding: 0.8rem 1rem;
      border-radius: 50px;
      font-weight: bold;
      cursor: pointer;
      z-index: 1100;
    }
    /* Fix label spacing */
    label {
      margin-top: 0.5rem;
      display: inline-block;
    }

    /* Checkout styles */
    #checkout-section {
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      max-width: 400px;
      margin: 2rem auto;
    }
    #checkout-cart .cart-item {
      margin-bottom: 10px;
    }
    #checkout-cart .cart-item:last-child {
      margin-bottom: 0;
    }
    #checkout-cart {
      margin-bottom: 1rem;
    }
    #checkout-total {
      font-weight: bold;
      font-size: 1.2rem;
    }
    #checkout-form input, #checkout-form button {
      display: block;
      margin-top: 10px;
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Shop at Marie's Graphics and Apparel</h1>
  </header>

  <nav>
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="index.html#about">About</a>
    <a href="index.html#contact">Contact</a>
  </nav>

  <section class="products">
    <div class="product" data-id="logo-cap" data-name="Logo Cap" data-price="14.99">
      <img src="20250604_130546.jpg" alt="Logo Cap" />
      <h3>Samford Cap</h3>
      <p>$14.99</p>
      <button class="add-to-cart">Add to Cart</button>
    </div>

    <div class="product" data-id="samford-tumbler" data-name="Samford Tumbler" data-price="24.99">
      <img src="Cup.jpg.jpg" alt="Samford Tumbler" />
      <h3>Samford Tumbler</h3>
      <p>$24.99</p>
      <button class="add-to-cart">Add to Cart</button>
    </div>

    <div class="product" data-id="samford-tote" data-name="Samford Tote" data-price="24.99">
      <img src="clear-tote-with-pocket_large.webp" alt="Samford Tote" />
      <h3>Samford Tote</h3>
      <p>$24.99</p>
      <button class="add-to-cart">Add to Cart</button>
    </div>

    <div class="product" data-id="samford-dogs-only" data-name='Samford "Dogs Only" Tee' data-price="24.99">
      <h3>Samford "Dogs Only" Tee</h3>
      <p>$24.99</p>
      <img id="shirt-image" src="ChatGPT_Image_Jun_6_2025_03_46_39_PM.png.png" alt='Samford "Dogs Only" White Tee' />
      <label for="size-sdo">Size:</label>
      <select id="size-sdo" name="size">
        <option value="">-- Select Size --</option>
        <option value="S">Small</option>
        <option value="M">Medium</option>
        <option value="L">Large</option>
        <option value="XL">X-Large</option>
        <option value="2XL">2X-Large</option>
        <option value="3XL">3X-Large</option>
      </select>
      <label for="color-sdo">Color:</label>
      <select id="color-sdo" name="color">
        <option value="">-- Select Color --</option>
        <option value="White">White</option>
        <option value="Navy">Navy</option>
        <option value="Red">Red</option>
      </select>
      <button class="add-to-cart">Add to Cart</button>
    </div>

    <div class="product" data-id="sun-visor" data-name="Sun Visor" data-price="14.99">
      <img src="Visor.jpg" alt="Visor" />
      <h3>Samford Sun Visor</h3>
      <p>$14.99</p>
      <button class="add-to-cart">Add to Cart</button>
    </div>
  </section>

  <button id="cart-toggle">Cart (0)</button>

  <div id="cart">
    <h2>
      Your Cart
      <button id="close-cart" title="Close Cart">&times;</button>
    </h2>
    <ul id="cart-items"></ul>
    <div id="cart-footer">Total: $0.00</div>
    <button id="checkout-button">Checkout</button>
  </div>

  <!-- Checkout Section -->
  <section id="checkout-section" style="display:none;">
    <h2>Checkout</h2>
    <div id="checkout-cart"></div>
    <p class="total">Total: $<span id="checkout-total">0.00</span></p>

    <h3>Shipping Info</h3>
    <form id="checkout-form">
      <input type="text" id="name" placeholder="Full Name" required />
      <input type="email" id="email" placeholder="Email" required />
      <input type="text" id="address" placeholder="Address" required />
      <input type="text" id="city" placeholder="City" required />
      <input type="text" id="zip" placeholder="ZIP Code" required />
      <button type="submit">Place Order</button>
    </form>
  </section>

  <footer>
    <p>&copy; 2025 Marie's Graphics and Apparel</p>
  </footer>

  <script>
    console.log("Shop page script running");

    // Update shirt image based on color selection
    const shirtImage = document.getElementById('shirt-image');
    const colorSelect = document.getElementById('color-sdo');

    const colorToImage = {
      White: "ChatGPT_Image_Jun_6_2025_03_46_39_PM.png.png",
      Navy: "Navy.png",
      Red: "Red.jpg"
    };

    colorSelect.addEventListener('change', () => {
      const selectedColor = colorSelect.value;
      shirtImage.src = colorToImage[selectedColor] || colorToImage.White;
      shirtImage.alt = `Samford "Dogs Only" ${selectedColor} Tee`;
    });

    // Cart Elements
    const cartToggle = document.getElementById('cart-toggle');
    const cart = document.getElementById('cart');
    const closeCartBtn = document.getElementById('close-cart');
    const cartItemsContainer = document.getElementById('cart-items');
    const cartFooter = document.getElementById('cart-footer');
    const checkoutSection = document.getElementById('checkout-section');
    const checkoutCartDiv = document.getElementById('checkout-cart');
    const checkoutTotalSpan = document.getElementById('checkout-total');

    // Load cart from localStorage or start empty
    let cartItems = JSON.parse(localStorage.getItem('cart')) || [];

    // Add to Cart button handler
    document.querySelectorAll('.add-to-cart').forEach(button => {
      button.addEventListener('click', (e) => {
        const productDiv = e.target.closest('.product');
        if (!productDiv) return;

        const id = productDiv.getAttribute('data-id');
        const name = productDiv.getAttribute('data-name');
        const price = parseFloat(productDiv.getAttribute('data-price'));

        // Get selected size and color if they exist
        const sizeSelect = productDiv.querySelector('select[name="size"]');
        const colorSelect = productDiv.querySelector('select[name="color"]');

        const size = sizeSelect ? sizeSelect.value : '';
        const color = colorSelect ? colorSelect.value : '';

        // Validate selection if applicable
        if (sizeSelect && !size) {
          alert('Please select a size.');
          return;
        }
        if (colorSelect && !color) {
          alert('Please select a color.');
          return;
        }

        // Check if the same product (with same options) is already in cart
        const existingIndex = cartItems.findIndex(item =>
          item.id === id &&
          item.size === size &&
          item.color === color
        );

        if (existingIndex > -1) {
          // Increase quantity if found
          cartItems[existingIndex].quantity += 1;
        } else {
          // Add new product to cart
          cartItems.push({
            id,
            name,
            price,
            size,
            color,
            quantity: 1
          });
        }

        // Save cart and update UI
        localStorage.setItem('cart', JSON.stringify(cartItems));
        updateCartUI();

        alert(`${name} added to cart!`);
      });
    });

    // Toggle cart visibility
    cartToggle.addEventListener('click', () => {
      cart.style.display = cart.style.display === 'block' ? 'none' : 'block';
    });

    // Close cart button
    closeCartBtn.addEventListener('click', () => {
      cart.style.display = 'none';
    });

    // Checkout button shows checkout form and hides cart
    document.getElementById('checkout-button').addEventListener('click', () => {
      if (cartItems.length === 0) {
        alert("Your cart is empty!");
        return;
      }
      cart.style.display = 'none';
      checkoutSection.style.display = 'block';
      renderCheckoutCart();
    });

    // Update Cart UI function
    function updateCartUI() {
      cartItemsContainer.innerHTML = '';
      let total = 0;
      let totalCount = 0;

      cartItems.forEach((item, index) => {
        total += item.price * item.quantity;
        totalCount += item.quantity;

        const li = document.createElement('li');
        li.innerHTML = `
          <span>${item.name}${item.size ? `, Size: ${item.size}` : ''}${item.color ? `, Color: ${item.color}` : ''} (x${item.quantity})</span>
          <button data-index="${index}" class="remove-item" title="Remove item">&times;</button>
        `;
        cartItemsContainer.appendChild(li);
      });

      cartFooter.textContent = `Total: $${total.toFixed(2)}`;
      cartToggle.textContent = `Cart (${totalCount})`;

      // Remove item buttons
      document.querySelectorAll('.remove-item').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const idx = e.target.getAttribute('data-index');
          cartItems.splice(idx, 1);
          localStorage.setItem('cart', JSON.stringify(cartItems));
          updateCartUI();
        });
      });
    }

    // Render cart inside checkout section
    function renderCheckoutCart() {
      checkoutCartDiv.innerHTML = '';
      let total = 0;
      cartItems.forEach(item => {
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.textContent = `${item.name} x${item.quantity} - $${(item.price * item.quantity).toFixed(2)}`;
        checkoutCartDiv.appendChild(div);
        total += item.price * item.quantity;
      });
      checkoutTotalSpan.textContent = total.toFixed(2);
    }

    // Checkout form submission
    document.getElementById('checkout-form').addEventListener('submit', function(e) {
      e.preventDefault();

      alert("Order placed! Thank you, " + document.getElementById('name').value);

      // Clear cart
      cartItems = [];
      localStorage.removeItem('cart');

      // Reset cart UI
      updateCartUI();

      // Hide checkout, maybe redirect or reset form
      checkoutSection.style.display = 'none';
      this.reset();

      // Optionally redirect to homepage
      // window.location.href = '/';
    });

    // Initialize cart UI on page load
    updateCartUI();
  </script>
</body>
</html>

